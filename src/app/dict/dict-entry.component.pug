.dict-entry(*ngIf='entry')
  .ui.header.entry-header
    .ui.right.floated.sub.header
    .entry-word {{entry.word}}
    .phonetics(*ngIf='entry.phonetics')
      label.ui.small.label 英
      span {{entry.phonetics['UK']}}
      label.ui.small.label 美
      span {{entry.phonetics['US']}}
    .categories
      label.ui.small.label(*ngFor='let cat of categoryTags') {{cat}}
  .clearing

  .ui.horizontal.list.base-forms(*ngIf='refWords||entryStack.length > 0')
    a.ui.item(*ngIf='entryStack.length > 0', (click)='goback()')
      i.left.arrow.icon
      | {{entryStack[entryStack.length-1].word}}
    a.ui.item(*ngFor='let word of refWords||[]', (click)='goto(word)')
      | {{word}}

  .ui.horizontal.link.list.user-vocabulary
    ng-template([ngIf]='userWord')
      .item
        .ui.mini.label([ngClass]='"word-familiarity-"+userWord.familiarity') {{userWord.familiarity | wordFamiliarity}}
      a.item
        | 熟悉度
        .ui.icon.mini.buttons
          .ui.button([ngClass]='{disabled:userWord.familiarity===3}', (click)='familiarityUp()')
            i.double.angle.up.icon
          .ui.button([ngClass]='{disabled:userWord.familiarity===1}', (click)='familiarityDown()')
            i.double.angle.down.icon
      .item
        .word-add-on 加入于 {{userWord | createdDateString}}
      a.item((click)='removeUserWord()') 移除
    .item(*ngIf='!userWord')
      .ui.mini.button((click)='addToVocabulary()') 加入我的词汇


  .ui.clearing.divider
  sui-tabset
    .ui.top.attached.tabular.menu
      a.item(suiTabHeader='co') 释义
      a.item(suiTabHeader='te', [(isActive)]='textTabActive', (activate)='textTabActivated()') 文本
    .ui.bottom.attached.segment(suiTabContent='co')
      sui-accordion([closeOthers]='false')
        sui-accordion-panel.pos-meanings(*ngFor='let pm of entry.complete||[]', [isOpen]='true')
          .pos-header(title='')
            i.dropdown.icon
            | {{pm.pos}}
          .ui.ordered.selection.divided.list.meaning-items(content='')
            .ui.item(*ngFor='let item of pm.items',
            [ngClass]='{"selected-item":item.id===selectedItemId}')
              span.meaning-item
                span.ui.small.label(*ngFor='let tag of item.tags') {{tagLabelMap[tag]}}
                | {{item.exp}}
    .ui.bottom.attached.segment(suiTabContent='te')
      div(*ngIf='userWordSource&&userWordSource.isCurrentPara')
        | 来源：当前段落
      div(*ngIf='userWordSource&&userWordSource.chap')
        .ui.right.floated.header
          sui-checkbox([(ngModel)]='textTrans') 中文
        .word-source-book(*ngIf='userWordSource.book') {{userWordSource.book.name}}
        .pre-wrap {{userWordSource.chap.name}}
        .pre-wrap([suiCollapse]='!textTrans') {{userWordSource.chap.zhName}}
        .ui.segment.word-source-text
          .content-text([innerHTML]='userWordSource.sanitizedContent')
          div([suiCollapse]='!textTrans')
            .ui.small.clearing.hidden.divider
            .trans-text([innerHTML]='userWordSource.sanitizedTrans')
